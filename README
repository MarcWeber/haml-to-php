This is work in progress.

Anyway me adding a real test suite and running it (even extending it)
should give you some confidence that this attemp is a serious attempt create a
HAML compliant libarary.

If you find bugs use the gituhub's bugs create a test case and send a patch, please.

Usage:
  $haml = "%div = $key"
  eval(Haml::treeToPHP($haml, "func_name"));
  echo func_name(array('key'=> "value"));

  The func runs extract on each passed argument to put vars in scope

  a HamlParseException is thrown if parsing fails
  Is there any way to push the parse location to the stack trace !?
  I haven't found one

Note:
  This library of course is limited by PHP. The language still sucks.
  I still tried getting the best out of it.

related work:
=============

  phamlp:
  =======
    See my statement. The parser will never be compliant without a rewrite
    The author seems to be gone away ? No replies or updates for a long time.

  Fammel: https://github.com/dxw/Fammel
  =====================================
    Its using a real Parser and grammar. Current status:
    Horribly broken. The author admits it.

    dxw: " However, there were two big problems. The first was a (perhaps inherent)
      struggle over implementing the syntax of Ruby haml exactly, or explicitly
      designing some PHP variant. I think the latter is what we eventually decided,
      mostly because... 
      [ .. next mail .. ]
        
        But the whole point of starting a new parser was in order to have one
      that was based on a formal, specified grammar. I think that any other approach
      would eventually become impossible to maintain. "

    me: I agree. Its a challenge :)
        But you yourself say why it won't work: You have to reimplement PHP
        parsers for each PHP version *shrug*. You want to maintain that?
        That's why I used the 20/80 rule and used a recursive regex.
        See arbitraryPHPCode. It should be good enough for almost all cases.
        Proof me wrong please :)

    me: Which sass implementation do you use?
    dxw: " original sass that comes with HAML
    me: (Yeah. Go Ruby if you can!)
        Nobody is going to fix PHP because Ruby exists ..
        (Mabye someone proofs me wrong

    Haml's testcases run on Fammel (ignoring spaces etc.)
    http://mawercer.de/~marc/results.txt

  This is a rewrite.
